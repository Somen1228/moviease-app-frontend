import{r,j as e}from"./index-CyGIF9Ci.js";import{b as g}from"./shows-CvO9i6Mz.js";import{h as N}from"./moment-C5S46NFB.js";import{S as n}from"./index-CPrshsSr.js";import{C as m}from"./index-C5zWeRAc.js";import{I as S}from"./index-Df66cVta.js";import{s as v}from"./index-pwftkDTR.js";import"./useSize-C4Mcq4xO.js";import"./index-DS1HrEU2.js";import"./useLocale-BHe1jgK4.js";const{Meta:D}=m,{Search:b}=S,{Option:c}=n;function M({userDetails:d}){const[i,w]=r.useState([]),[p,x]=r.useState([]),[l,u]=r.useState(""),[h,j]=r.useState("showNameAsc");r.useEffect(()=>{(async()=>{await f()})()},[]),r.useEffect(()=>{(()=>{let t=i;switch(l&&(t=t.filter(a=>a.show.name.toLowerCase().includes(l.toLowerCase()))),h){case"showNameAsc":t=t.sort((a,o)=>a.show.name.localeCompare(o.show.name));break;case"showNameDesc":t=t.sort((a,o)=>o.show.name.localeCompare(a.show.name));break;case"dateAsc":t=t.sort((a,o)=>new Date(a.show.date)-new Date(o.show.date));break;case"dateDesc":t=t.sort((a,o)=>new Date(o.show.date)-new Date(a.show.date));break;case"priceDesc":t=t.sort((a,o)=>a.show.ticketPrice*a.seats.length-o.show.ticketPrice*o.seats.length);break;case"priceAsc":t=t.sort((a,o)=>o.show.ticketPrice*o.seats.length-a.show.ticketPrice*a.seats.length);break}x(t)})()},[l,i,h]);const f=async()=>{const s=await g({userDetails:d});s.success?w(s.data):v.error(s.message)};return e.jsxs("div",{className:"container mt-32 mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Booked Shows"}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(b,{placeholder:"Search by show name",onChange:s=>u(s.target.value),value:l,enterButton:!0,className:"w-full md:w-1/2 lg:w-1/3"}),e.jsxs(n,{defaultValue:"showNameAsc",onChange:s=>j(s),className:"w-full md:w-1/4 lg:w-1/5 ml-4",style:{width:200},children:[e.jsx(c,{value:"showNameAsc",children:"Name (A-Z)"}),e.jsx(c,{value:"showNameDesc",children:"Name (Z-A)"}),e.jsx(c,{value:"dateAsc",children:"Date (Old to New)"}),e.jsx(c,{value:"dateDesc",children:"Date (New to Old)"}),e.jsx(c,{value:"priceAsc",children:"Price (Low to High)"}),e.jsx(c,{value:"priceDesc",children:"Price (High to Low)"})]})]}),i.length==0?e.jsx("div",{className:"flex justify-center items-top h-screen text-2xl font-bold text-blue-600 bg-gray-100 border border-gray-300 rounded-lg p-6 shadow-md",children:"You haven't booked any shows :("}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:p.map(s=>e.jsx(m,{className:"w-full",cover:e.jsx("img",{alt:s.show.movie.title,src:s.show.movie.poster,className:"h-48 w-full object-cover rounded-t-lg"}),children:e.jsx(D,{title:s.show.name,description:e.jsxs("div",{className:"text-sm",children:[e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Theatre:"})," ",s.show.theatre.name]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Date:"})," ",N(s.show.date).format("YYYY-MM-DD")]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Time:"})," ",s.show.time]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Seats:"})," ",s.seats.join(", ")]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:"Price:"})," Rs. "," ",s.show.ticketPrice*s.seats.length," /-"]})]})})},s._id))})]})}export{M as default};
